/* Parisienne font with proper iOS Safari support */
@import url('https://fonts.googleapis.com/css2?family=Parisienne&display=swap');

/* iOS font rendering fix + lowercase for Parisienne (script font) */
@supports (-webkit-touch-callout: none) {
  .font-display {
    -webkit-text-stroke: 0.25px; /* Improves rendering on iOS */
  }
}

/* Parisienne font: force lowercase (uppercase renders poorly on iOS) */
.font-display {
  text-transform: lowercase;
}
@import url('https://cdn.jsdelivr.net/npm/flag-icons@7.2.3/css/flag-icons.min.css');
@import "tailwindcss";

/**
 * Cigar Platform Design System - "Smoke & Gold"
 * Ultra modern dark theme with premium gold accents
 * Inspired by cigar smoke, luxury lounges, and modern premium apps
 */

/* Global html/body reset and styles */
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  min-height: 100dvh; /* Dynamic viewport height (ignores mobile browser chrome) */
  overscroll-behavior: none; /* Disable native pull-to-refresh & bounce */
}

body {
  @apply bg-smoke-700 text-smoke-100;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overscroll-behavior-y: contain;
}

@theme {
  /* ============================================ */
  /* FONTS */
  /* ============================================ */
  --font-display: 'Parisienne', cursive;


  /* ============================================ */
  /* SMOKE: Warm dark backgrounds (cigar-inspired) */
  /* Better contrast + warmer tones for readability */
  /* ============================================ */
  --color-smoke-950: #0e0e0d;   /* Absolute dark */
  --color-smoke-900: #141413;   /* App background */
  --color-smoke-850: #19191a;   /* Deep surface */
  --color-smoke-800: #1e1e1d;   /* Surface */
  --color-smoke-750: #232322;   /* Between surface & card */
  --color-smoke-700: #282726;   /* Card/elevated - BASE */
  --color-smoke-600: #343332;   /* Lighter surface */
  --color-smoke-500: #413f3e;   /* Borders */
  --color-smoke-400: #545251;   /* Subtle elements */
  --color-smoke-300: #6e6c6b;   /* Muted text */
  --color-smoke-200: #8c8a89;   /* Secondary text */
  --color-smoke-100: #b3b1b0;   /* Body text */
  --color-smoke-50: #d4d3d2;    /* Primary text */
  --color-smoke-25: #e2e2dd;    /* Headings - BASE */

  /* ============================================ */
  /* GOLD: Premium accents (unchanged) */
  /* ============================================ */
  --color-gold-50: #fefce8;
  --color-gold-100: #fef9c3;
  --color-gold-200: #fef08a;
  --color-gold-300: #fde047;
  --color-gold-400: #e5c158;
  --color-gold-500: #d4af37;   /* Primary gold */
  --color-gold-600: #b8941f;
  --color-gold-700: #9a7a1a;
  --color-gold-800: #7d6316;
  --color-gold-900: #5e4a0f;
  --color-gold-950: #3d2f0a;

  /* ============================================ */
  /* SEMANTIC: Success (Pastel Sage Green) */
  /* Softer, less saturated for dark theme */
  /* ============================================ */
  --color-success-50: #f4f9f5;
  --color-success-100: #e4f0e6;
  --color-success-200: #c9e1cd;
  --color-success-300: #a3cca9;
  --color-success-400: #7bb583;
  --color-success-500: #5a9a64;   /* Main - pastel sage */
  --color-success-600: #4a8054;
  --color-success-700: #3d6745;
  --color-success-800: #345439;
  --color-success-900: #1e3321;

  /* ============================================ */
  /* SEMANTIC: Warning (Pastel Amber) */
  /* Softer, warm tone */
  /* ============================================ */
  --color-warning-50: #fdf9f3;
  --color-warning-100: #faefdd;
  --color-warning-200: #f4ddb8;
  --color-warning-300: #ecc78e;
  --color-warning-400: #e2ad64;
  --color-warning-500: #d49545;   /* Main - pastel amber */
  --color-warning-600: #b67d3a;
  --color-warning-700: #966532;
  --color-warning-800: #7a522c;
  --color-warning-900: #4d331b;

  /* ============================================ */
  /* SEMANTIC: Error (Pastel Terracotta) */
  /* Softer, earthy red */
  /* ============================================ */
  --color-error-50: #fdf6f5;
  --color-error-100: #fae8e6;
  --color-error-200: #f4cfcb;
  --color-error-300: #ebada6;
  --color-error-400: #df8a82;
  --color-error-500: #c96b62;   /* Main - pastel terracotta */
  --color-error-600: #aa564e;
  --color-error-700: #8c4640;
  --color-error-800: #723a35;
  --color-error-900: #4a2420;

  /* ============================================ */
  /* SEMANTIC: Info (Pastel Slate Blue) */
  /* Softer, muted blue */
  /* ============================================ */
  --color-info-50: #f5f8fa;
  --color-info-100: #e6eef3;
  --color-info-200: #ccdde8;
  --color-info-300: #a8c5d6;
  --color-info-400: #82a9c1;
  --color-info-500: #6590a8;   /* Main - pastel slate blue */
  --color-info-600: #52768a;
  --color-info-700: #435f70;
  --color-info-800: #384e5b;
  --color-info-900: #243239;

  /* ============================================ */
  /* SEMANTIC ALIASES - Dark Theme */
  /* ============================================ */
  --color-primary: var(--color-gold-500);
  --color-primary-hover: var(--color-gold-600);
  --color-secondary: var(--color-smoke-600);
  --color-secondary-hover: var(--color-smoke-500);
  --color-accent: var(--color-gold-500);
  --color-accent-hover: var(--color-gold-400);

  /* ============================================ */
  /* BACKGROUNDS - Ultra Dark */
  /* ============================================ */
  --color-background: var(--color-smoke-900);
  --color-surface: var(--color-smoke-800);
  --color-surface-elevated: var(--color-smoke-700);
  --color-surface-glass: rgba(26, 26, 26, 0.6); /* Glassmorphism */

  /* ============================================ */
  /* TEXT - Light on Dark */
  /* ============================================ */
  --color-text-primary: var(--color-smoke-50);
  --color-text-secondary: var(--color-smoke-200);
  --color-text-muted: var(--color-smoke-300);
  --color-text-subtle: var(--color-smoke-400);

  /* ============================================ */
  /* BORDERS - Subtle Dark */
  /* ============================================ */
  --color-border: var(--color-smoke-700);
  --color-border-subtle: var(--color-smoke-800);
  --color-border-focus: var(--color-gold-500);
}

/* ============================================ */
/* TYPOGRAPHY - Shortcuts for consistency */
/* ============================================ */
@layer components {
  /* Display & Headers */
  .heading-display {
    @apply font-display text-3xl md:text-4xl text-gold-500;
  }

  .heading-1 {
    @apply text-3xl md:text-5xl font-bold text-smoke-25;
  }

  .heading-2 {
    @apply text-2xl md:text-3xl font-semibold text-smoke-25;
  }

  .heading-3 {
    @apply text-xl md:text-2xl font-semibold text-smoke-50;
  }

  .heading-section {
    @apply text-2xl font-semibold text-smoke-25;
  }

  /* Body Text */
  .body-lg {
    @apply text-lg leading-relaxed text-smoke-200;
  }

  .body {
    @apply text-base leading-normal text-smoke-300;
  }

  .body-sm {
    @apply text-sm leading-normal text-smoke-400;
  }

  /* Helpers */
  .caption {
    @apply text-xs text-smoke-400;
  }

  .label {
    @apply text-sm font-medium text-smoke-300;
  }

  .muted {
    @apply text-smoke-400;
  }
}

/* ============================================ */
/* TOAST NOTIFICATIONS - Smoke & Gold Theme */
/* ============================================ */
@layer components {
  /* Toast container */
  :root {
    --toast-bg: theme('colors.smoke.800');
    --toast-border: theme('colors.smoke.700');
    --toast-text: theme('colors.smoke.50');
    --toast-success: theme('colors.success.500');
    --toast-error: theme('colors.error.500');
    --toast-warning: theme('colors.warning.500');
    --toast-info: theme('colors.info.500');
  }

  /* Override Sonner default styles */
  [data-sonner-toaster] {
    --normal-bg: var(--toast-bg);
    --normal-border: var(--toast-border);
    --normal-text: var(--toast-text);
    --success-bg: theme('colors.success.900');
    --success-border: theme('colors.success.500');
    --success-text: theme('colors.success.400');
    --error-bg: theme('colors.error.900');
    --error-border: theme('colors.error.500');
    --error-text: theme('colors.error.400');
  }

  [data-sonner-toast] {
    @apply bg-smoke-800 border border-gold-500/30 text-smoke-50 shadow-2xl shadow-smoke-950/50 backdrop-blur-sm rounded-lg;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  }

  [data-sonner-toast][data-type='success'] {
    @apply bg-smoke-800 border-success-500/50 text-smoke-50;
  }

  [data-sonner-toast][data-type='success'] [data-icon] svg {
    @apply text-success-500;
  }

  [data-sonner-toast][data-type='error'] {
    @apply bg-smoke-800 border-error-500/50 text-smoke-50;
  }

  [data-sonner-toast][data-type='error'] [data-icon] svg {
    @apply text-error-500;
  }

  [data-sonner-toast][data-type='warning'] {
    @apply bg-smoke-800 border-warning-500/50 text-smoke-50;
  }

  [data-sonner-toast][data-type='warning'] [data-icon] svg {
    @apply text-warning-500;
  }

  [data-sonner-toast][data-type='info'] {
    @apply bg-smoke-800 border-info-500/50 text-smoke-50;
  }

  [data-sonner-toast][data-type='info'] [data-icon] svg {
    @apply text-info-500;
  }

  [data-sonner-toast] [data-title] {
    @apply text-sm leading-normal text-smoke-50 font-medium;
  }

  [data-sonner-toast] [data-description] {
    @apply text-xs text-smoke-400;
  }

  [data-sonner-toast] [data-button] {
    @apply bg-smoke-700 hover:bg-smoke-600 text-smoke-50 border-smoke-600;
  }

  [data-sonner-toast] [data-close-button] {
    @apply bg-smoke-700 hover:bg-smoke-600 border-smoke-600;
  }
}

/* ============================================ */
/* UTILITIES - Scrollbar hide for mobile tabs */
/* ============================================ */
@layer utilities {
  .scrollbar-hide {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;  /* Chrome, Safari and Opera */
  }
}

/* ============================================ */
/* PWA MOBILE - Utilities & Touch */
/* ============================================ */
@layer utilities {
  /* iOS momentum scrolling */
  .scroll-touch {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-y: contain;
  }
}

/* Touch optimization - prevent double-tap zoom delay */
@layer base {
  button, a, [role="button"], input, select, textarea {
    touch-action: manipulation;
  }
}

/* Standalone PWA mode detection */
@media (display-mode: standalone) {
  .pwa-safe-top {
    padding-top: env(safe-area-inset-top);
  }
  .pwa-safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* Pull to refresh spinner animation */
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* ============================================ */
/* MAIN CONTENT - Safe area aware padding */
/* ============================================ */
.main-content {
  /* Mobile: account for mobile header + safe area */
  padding-top: calc(4.5rem + env(safe-area-inset-top, 0px));
}

@media (min-width: 768px) {
  .main-content {
    /* Desktop: fixed padding (no mobile header) */
    padding-top: 6rem; /* pt-24 equivalent */
  }
}

/* Explore page: no header, only safe-area */
.main-content-no-header {
  /* Mobile: only safe-area (no header) */
  padding-top: env(safe-area-inset-top, 0px);
}

@media (min-width: 768px) {
  .main-content-no-header {
    /* Desktop: fixed padding for top tabs */
    padding-top: 4.5rem;
  }
}

/* ============================================ */
/* VAUL-LIKE DRAWER EFFECT - Modern Mobile UX */
/* Replaces CDK scroll blocking with CSS-only approach */
/* ============================================ */
@layer base {
  /**
   * When a drawer/modal/bottomsheet is open:
   * - Block scroll via overflow (not position:fixed)
   * - This prevents the tabbar jump issue on iOS Safari
   * - The VaulWrapperDirective handles the scale effect
   */
  body.vaul-drawer-open {
    overflow: hidden !important;
    touch-action: none;
    /* Keep position static - no reflow on fixed elements */
  }

  /* Ensure html also blocks scroll */
  html:has(body.vaul-drawer-open) {
    overflow: hidden;
  }
}

/* ============================================ */
/* CDK OVERLAY FIX - Override default behavior */
/* Since we use noop() scroll strategy, CDK won't add */
/* cdk-global-scrollblock class. But keep this as fallback. */
/* ============================================ */
@layer base {
  /* Override CDK scroll block to avoid position:fixed on body */
  /* This prevents the "jump" on fixed elements when modal opens */
  body.cdk-global-scrollblock {
    position: static !important;
    overflow: hidden !important;
    /* Prevent scroll without changing position */
    touch-action: none;
  }

  /* Ensure html also blocks scroll */
  html:has(body.cdk-global-scrollblock) {
    overflow: hidden;
  }
}

/* ============================================ */
/* VAUL WRAPPER STATES - For additional CSS hooks */
/* ============================================ */
@layer utilities {
  /* Additional class applied by VaulWrapperDirective */
  .vaul-scaled {
    /* The scale and border-radius are applied via JS */
    /* This class can be used for additional styling */
  }
}
